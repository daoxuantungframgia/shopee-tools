<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chia Link Thành Nhóm 1000</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        background: #f8f9fa;
        padding: 20px;
        color: #333;
      }
      h1 {
        text-align: center;
        color: #2c3e50;
      }
      textarea {
        width: 100%;
        height: 200px;
        padding: 10px;
        font-size: 14px;
        border: 1px solid #ccc;
        border-radius: 5px;
        resize: vertical;
      }
      button {
        padding: 10px 15px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-weight: bold;
        margin-top: 10px;
      }
      button:hover {
        background-color: #0056b3;
      }
      .group-box {
        background: white;
        border: 1px solid #ccc;
        padding: 10px;
        margin-top: 15px;
        border-radius: 5px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      }
      .group-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .group-links {
        white-space: pre-wrap;
        margin-top: 8px;
        font-family: monospace;
        font-size: 13px;
        background: #f4f4f4;
        padding: 10px;
        border-radius: 5px;
        max-height: 200px;
        overflow-y: auto;
      }
    </style>
  </head>
  <body>
    <h1>Chia Link Thành Nhóm 1000</h1>

    <textarea
      id="inputLinks"
      placeholder="Dán link vào đây, mỗi link một dòng..."
    ></textarea
    ><br />
    <button id="splitButton">Chia sản phẩm</button>

    <div id="output"></div>

    <script>
      const splitButton = document.getElementById('splitButton');
      const output = document.getElementById('output');

      splitButton.addEventListener('click', () => {
        const text = document.getElementById('inputLinks').value.trim();
        const links = text.split(/\r?\n/).filter((line) => line.trim() !== '');
        const chunkSize = 1000;

        output.innerHTML = '';

        if (links.length === 0) {
          alert('Vui lòng nhập ít nhất 1 link!');
          return;
        }

        const totalGroups = Math.ceil(links.length / chunkSize);
        links.forEach((_, i) => {
          if (i % chunkSize === 0) {
            const chunk = links.slice(i, i + chunkSize);
            const box = document.createElement('div');
            box.className = 'group-box';
            box.innerHTML = `
            <div class="group-header">
              <strong>Nhóm ${Math.floor(i / chunkSize) + 1} (${
              chunk.length
            } link)</strong>
              <button class="copy-btn">Copy</button>
            </div>
            <div class="group-links">${chunk.join('\n')}</div>
          `;
            output.appendChild(box);
          }
        });

        // Thêm sự kiện copy
        document.querySelectorAll('.copy-btn').forEach((btn) => {
          btn.addEventListener('click', (e) => {
            const textToCopy = e.target
              .closest('.group-box')
              .querySelector('.group-links').innerText;
            navigator.clipboard.writeText(textToCopy);
            btn.innerText = '✅ Đã Copy';
            setTimeout(() => (btn.innerText = 'Copy'), 1500);
          });
        });
      });
    </script>
  </body>
</html>
